"use strict"

document.addEventListener('DOMContentLoaded', function() {
  
  // для кнопки меню    
  let menuBtn = document.querySelector('.menu__burger'),
      openNav = document.querySelector('.open-nav'),
      menu = document.querySelector('.menu'),
      sectionNav = document.querySelector('.section-nav'),
      opacityBlock = document.querySelector('.opacity-block')
  
  menuBtn.addEventListener('click', () => {
    [menuBtn, openNav, menu, sectionNav, opacityBlock].forEach(item => {
      item.classList.toggle('active')
    })
    document.documentElement.classList.toggle('lock')
  }) 
  
  // для селекта
  let select = function () {
    let selectHeader = document.querySelectorAll('.select__header')
    let selectItem = document.querySelectorAll('.select__item')
  
    selectHeader.forEach(item => {
        item.addEventListener('click', selectToggle)
    });
  
    selectItem.forEach(item => {
      item.addEventListener('click', selectChoose)
    });
  
    function selectToggle() {
      this.parentElement.classList.toggle('is-active')
      if (document.querySelector('.select-country.is-active')) {
        document.querySelector('.select-date').style.display = 'none' 
      }
      if (document.querySelector('.select-date.is-active')) {
        document.querySelector('.select-country').style.display = 'none' 
      }
    }
  
    function selectChoose() {
      let text = this.innerText,
          select = this.closest('.select-type, .select-date, .select-country'),
          currentText = select.querySelector('.select__current')
          currentText.innerText = text
          select.classList.remove('is-active')
      document.querySelector('.select-date').style.display = 'inline-block' 
      document.querySelector('.select-country').style.display = 'inline-block'
    }
  
  };
    
  select()





  // для проверки формы
  let button = document.getElementById('button'),
      input = document.querySelectorAll('input[required]')
  button.addEventListener('click', () => {
    input.forEach(item => {
      item.classList.add('req')
    })
  })

  // допуск нажать кнопку(согласие с обработкой данных)
  let agree = document.getElementById('agree')
  agree.addEventListener('change', function() {
    button.disabled = !this.checked
  })

})